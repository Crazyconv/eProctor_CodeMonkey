<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0) on Sun Apr 20 00:00:32 WITA 2014 -->
<title>InvigilatorController</title>
<meta name="date" content="2014-04-20">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
<script type="text/javascript" src="../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="InvigilatorController";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":9,"i1":9,"i2":9,"i3":9,"i4":9,"i5":9,"i6":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../controllers/ExamController.html" title="class in controllers"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../controllers/StudentController.html" title="class in controllers"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?controllers/InvigilatorController.html" target="_top">Frames</a></li>
<li><a href="InvigilatorController.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">controllers</div>
<h2 title="Class InvigilatorController" class="title">Class InvigilatorController</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>Controller</li>
<li>
<ul class="inheritance">
<li>controllers.InvigilatorController</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">InvigilatorController</span>
extends Controller</pre>
<div class="block">This class contains a set of static methods that will handle all kinds of operations perfermed by an invigilator in an on-going exam.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../controllers/InvigilatorController.html#InvigilatorController--">InvigilatorController</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static ObjectNode</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../controllers/InvigilatorController.html#checkUpDate-java.lang.Integer-java.lang.Integer-java.lang.Integer-">checkUpDate</a></span>(java.lang.Integer&nbsp;examRecordId,
           java.lang.Integer&nbsp;lastChatId,
           java.lang.Integer&nbsp;lastImageId)</code>
<div class="block">Gets the latest unseen image and all unread images for a <a href="../models/ExamRecord.html" title="class in models"><code>exam record</code></a>.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static Result</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../controllers/InvigilatorController.html#displaySchedule--">displaySchedule</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static Result</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../controllers/InvigilatorController.html#pollMessageImage--">pollMessageImage</a></span>()</code>
<div class="block">Gets the latest unseen image and all unread images for all <a href="../models/ExamRecord.html" title="class in models"><code>exam record</code></a> currently being invigilated.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>static Result</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../controllers/InvigilatorController.html#sendMessage--">sendMessage</a></span>()</code>
<div class="block">Stores in database the message a invigilator wants to send to a student.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>static Result</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../controllers/InvigilatorController.html#signIn--">signIn</a></span>()</code>
<div class="block">Signs in the current invigilator for exams specified in the form received and bring him to a new page.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>static Result</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../controllers/InvigilatorController.html#submitRemark--">submitRemark</a></span>()</code>
<div class="block">Store into database the remark from form received.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>static Result</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../controllers/InvigilatorController.html#verifyStudent--">verifyStudent</a></span>()</code>
<div class="block">Set the status of exam record to be either verified or expelled.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="InvigilatorController--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>InvigilatorController</h4>
<pre>public&nbsp;InvigilatorController()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="displaySchedule--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>displaySchedule</h4>
<pre>public static&nbsp;Result&nbsp;displaySchedule()</pre>
</li>
</ul>
<a name="signIn--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>signIn</h4>
<pre>public static&nbsp;Result&nbsp;signIn()</pre>
<div class="block">Signs in the current invigilator for exams specified in the form received and bring him to a new page.

 Information expected from the form received.
<ul>
      <li>examIds: a list of examIds, whose corresponding <a href="../models/ExamRecord.html" title="class in models"><code>exam records</code></a> the invigilator requestes to sign in for</li>
</ul></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>An on-going invigilation page rendered with a list of ExamRecord as parameter.</dd>
</dl>
</li>
</ul>
<a name="pollMessageImage--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>pollMessageImage</h4>
<pre>public static&nbsp;Result&nbsp;pollMessageImage()</pre>
<div class="block">Gets the latest unseen image and all unread images for all <a href="../models/ExamRecord.html" title="class in models"><code>exam record</code></a> currently being invigilated.

 <p>Executing this method once will give: 
 <ul>
     <li> 1 image for 1 student currently being invigilated by the current invigilator. Each image 
          will be the latest one at the time of execution for the corresponding student. This means
          not all unseen images will get to be presented to invigilator. For example, if they are 2
          unseen images of a student, only the latest one will be fetched by this method, and the
          other one will simply be skipped</li>
     <li> 1 set of chats for 1 student currently being invigilated by the current invigilator. Each set
          of chats will contain all chats that are sent by the corresponding student but haven't been read
          by the current invigilator</li>
     
 </ul></p>
 
 <p>Expected information from form received:
 <ul>
     <li>lastChatId: the id of the latest chats among </li>
     <li>lastImageId</li>
     <li><span id='examIds'>examIds</span>: A list of exams organized in a string and separated by comma.</li>
 </ul></p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A JsonNode wrapped in an ok HTTP reponse, and there are at least 3 fields in this JsonNode (* means there are 0 to many number of that field):
 <ul>
     <li>{&lt;examId&gt;}*: a JsonNode with 2 fields (every entry in <a href='#examIds'>examIds</a> will result in one such field with its own name)<ul>
         <li>chatList: a list of all <b>unread</b> chat messages in Json format, in ascending order of id</li>
         <li>imageId: id of the latest image (whether it is unread is not guaranteed)</li>
     </ul></li>
     <li>newChatId: id of the latest message among all exam records that are being invigilated by current invigilator
         (whether it is unread is not guaranteed)</li>
     <li>newImageId id of the latest image among all exam records that are being invigilated by current invigilator 
         (whether it is unread is not guaranteed)</li>
     <li>error: similar semantics as enter() in Application</li>
 </ul></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../controllers/Application.html#enter--"><code>Application.enter()</code></a></dd>
</dl>
</li>
</ul>
<a name="checkUpDate-java.lang.Integer-java.lang.Integer-java.lang.Integer-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkUpDate</h4>
<pre>public static&nbsp;ObjectNode&nbsp;checkUpDate(java.lang.Integer&nbsp;examRecordId,
                                     java.lang.Integer&nbsp;lastChatId,
                                     java.lang.Integer&nbsp;lastImageId)
                              throws <a href="../utils/CMException.html" title="class in utils">CMException</a>,
                                     java.lang.NumberFormatException</pre>
<div class="block">Gets the latest unseen image and all unread images for a <a href="../models/ExamRecord.html" title="class in models"><code>exam record</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>examRecordId</code> - the id of exam record whose chat and image will be queried on.</dd>
<dd><code>lastChatId</code> - the id of the latest read chat message(a reference point). all chats newer than this are unread</dd>
<dd><code>lastImageId</code> - the id of the latest read image(a reference point). All images newer than this are unread</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A JsonNode with 3 fields
 <ul>
     <li>current: reference to another JsonNode with 2 fields</li><ul>
         <li>chatList: a list of all <b>unread</b> chat messages in Json format, in ascending order of id</li>
         <li>imageId: id of the latest image(whether it is unread is not guaranteed)</li>
     </ul>
     <li>newChatId: id of the latest message(whether it is unread is not guaranteed)</li>
     <li>newImageId id of the latest image(whether it is unread is not guaranteed)</li>
 </ul></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../utils/CMException.html" title="class in utils">CMException</a></code> - [description]</dd>
<dd><code>java.lang.NumberFormatException</code> - [description]</dd>
</dl>
</li>
</ul>
<a name="sendMessage--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendMessage</h4>
<pre>public static&nbsp;Result&nbsp;sendMessage()</pre>
<div class="block">Stores in database the message a invigilator wants to send to a student.

 Information(fields) expected from the form submitted by Ajax
 <ul>
     <li>examRecordId: <a href="../models/ExamRecord.html#examRecordId"><code>ID of the exam record</code></a> that this message belongs to</li>
     <li>message: the chat message that the invigilator wants to send to a student</li>
 </ul></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A JsonNode wrapped in a ok HTTP response carring an error field, whose semantic is similar to that of enter() in Application</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../models/Chat.html" title="class in models"><code>Chat</code></a>, 
<a href="../models/Report.html" title="class in models"><code>Report</code></a>, 
<a href="../controllers/Application.html#enter--"><code>Application.enter()</code></a></dd>
</dl>
</li>
</ul>
<a name="verifyStudent--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>verifyStudent</h4>
<pre>public static&nbsp;Result&nbsp;verifyStudent()</pre>
<div class="block">Set the status of exam record to be either verified or expelled.

 <p>It receives the judgement from invigilator on whether the person signed in for the exam (appearing on the camera)
 matches with the information of the student account. <p/>
 The judgment can be either 
 <ul>
     <li>verified - the person present on camera is the student account holder</li>
     <li>expelled - the person present on camera isn't the student account holder</li>
 </ul>
 and based on it, the status of <a href="../models/ExamRecord.html" title="class in models"><code>exam record</code></a> (which is actually stored in the <a href="../models/Report.html" title="class in models"><code>Report</code></a> object
 associated with the exam record) will be set to either verified or expelled</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A JsonNode wrapped in a ok HTTP response carring an error field, whose semantic is similar to that of enter() in Application</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../controllers/Application.html#enter--"><code>Application.enter()</code></a></dd>
</dl>
</li>
</ul>
<a name="submitRemark--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>submitRemark</h4>
<pre>public static&nbsp;Result&nbsp;submitRemark()</pre>
<div class="block">Store into database the remark from form received.

 Information expected from form received.
 <ul>
     <li>remark: the content of the remark</li>
     <li>examId: used to locate the <a href="../models/ExamRecord.html" title="class in models"><code>exam record</code></a> that the remark is supposed to be made on</li>
 </ul>
 Newer remark will overwrite the old one, if any.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A JsonNode wrapped in a ok HTTP response carring an error field, whose semantic is similar to that of enter() in Application</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../models/Report.html" title="class in models"><code>Report</code></a>, 
<a href="../controllers/Application.html#enter--"><code>Application.enter()</code></a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../controllers/ExamController.html" title="class in controllers"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../controllers/StudentController.html" title="class in controllers"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?controllers/InvigilatorController.html" target="_top">Frames</a></li>
<li><a href="InvigilatorController.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
