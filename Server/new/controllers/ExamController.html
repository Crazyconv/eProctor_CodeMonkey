<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0) on Sun Apr 20 00:00:32 WITA 2014 -->
<title>ExamController</title>
<meta name="date" content="2014-04-20">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
<script type="text/javascript" src="../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ExamController";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":9,"i1":9,"i2":9,"i3":9,"i4":9,"i5":9,"i6":9,"i7":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../controllers/Application.html" title="class in controllers"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../controllers/InvigilatorController.html" title="class in controllers"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?controllers/ExamController.html" target="_top">Frames</a></li>
<li><a href="ExamController.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">controllers</div>
<h2 title="Class ExamController" class="title">Class ExamController</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>Controller</li>
<li>
<ul class="inheritance">
<li>controllers.ExamController</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">ExamController</span>
extends Controller</pre>
<div class="block">This class contains a set of static methods that will handle all kinds of operations perfermed by a student in an on-going exam.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../controllers/ExamController.html#ExamController--">ExamController</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static Result</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../controllers/ExamController.html#checkExamStatus--">checkExamStatus</a></span>()</code>
<div class="block">Checks whether the current student has checked in for an <a href="../models/ExamRecord.html" title="class in models"><code>exam record</code></a>.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static Result</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../controllers/ExamController.html#finishExam--">finishExam</a></span>()</code>
<div class="block">Finishes an exam for a student.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static Result</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../controllers/ExamController.html#getImage-java.lang.Integer-">getImage</a></span>(java.lang.Integer&nbsp;imageId)</code>
<div class="block">Gets from database one of the frames making up the video stream of a student.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>static Result</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../controllers/ExamController.html#getPhoto-java.lang.Integer-">getPhoto</a></span>(java.lang.Integer&nbsp;studentId)</code>
<div class="block">Gets from database the ID photo of a student.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>static Result</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../controllers/ExamController.html#pollMessage--">pollMessage</a></span>()</code>
<div class="block">Gets from database all unread messages of an <a href="../models/ExamRecord.html" title="class in models"><code>exam record</code></a>.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>static Result</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../controllers/ExamController.html#saveAnswer--">saveAnswer</a></span>()</code>
<div class="block">Validates and stores the anwser submitted as an <a href="../cw_models/Answer.html" title="class in cw_models"><code>object</code></a> in database.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>static Result</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../controllers/ExamController.html#sendMessage--">sendMessage</a></span>()</code>
<div class="block">Puts into database a message sent by student.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>static Result</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../controllers/ExamController.html#storeImage--">storeImage</a></span>()</code>
<div class="block">Processes and stores the image-string from the form received.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ExamController--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ExamController</h4>
<pre>public&nbsp;ExamController()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="checkExamStatus--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkExamStatus</h4>
<pre>public static&nbsp;Result&nbsp;checkExamStatus()</pre>
<div class="block">Checks whether the current student has checked in for an <a href="../models/ExamRecord.html" title="class in models"><code>exam record</code></a>.

 <p>Infomration expected from the form received:
 <ul>
     <li>examId: id of the exam record, whose status is being queried on.</li>
 </ul></p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A JsonNode wrapped in an ok HTTP response which has 2 fields:
 <ul>
     <li>error: its semantic is similar to that of enter() in Application</li>
 </ul></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../controllers/Application.html#enter--"><code>Application.enter()</code></a></dd>
</dl>
</li>
</ul>
<a name="saveAnswer--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>saveAnswer</h4>
<pre>public static&nbsp;Result&nbsp;saveAnswer()</pre>
<div class="block">Validates and stores the anwser submitted as an <a href="../cw_models/Answer.html" title="class in cw_models"><code>object</code></a> in database.

 Expects 3 pieces of information from the caller
 <ul>
     <li>the content of the answer submitted by student</li>
     <li>the <a href="../cw_models/Question.html" title="class in cw_models"><code>question</code></a> to which this answer corresponds</li>
     <li>the <a href="../models/ExamRecord.html" title="class in models"><code>exam record</code></a> during which this answer is submitted</li>
 </ul>
 An answer is uniquely identified by the question and the student, 
 which are derived from the information above. If such an answer is
 found alredy existent in the database, old answer will be overwritten</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A JsonNode wrapped in an ok HTTP response carring an error field to indicate whether the answer is sucessfully stored in server, whose semantic is similar to that of enter() in Application.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../controllers/Application.html#enter--"><code>Application.enter()</code></a></dd>
</dl>
</li>
</ul>
<a name="storeImage--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>storeImage</h4>
<pre>public static&nbsp;Result&nbsp;storeImage()</pre>
<div class="block">Processes and stores the image-string from the form received.

 When the server receives an image string POSTed from the web, this controller is activated. It checks whether the POSTer
 is a student. If yes, it re-assembles the string into an image and store it on students's local file system, at the same time,
 creates in database an object of <a href="../models/Image.html" title="class in models"><code>Image model</code></a>(which is basically a pointer) to that file, and link this pointer
 with the <a href="../models/Report.html" title="class in models"><code>Report model</code></a> of the student sending out this image.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A JsonNode wrapped in a ok HTTP response carring an error field to indicate whether the image is succesfully stored in server, whose semantic is similar to that of enter() in Application.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../cw_models/Student.html" title="class in cw_models"><code>Student</code></a>, 
<a href="../models/ExamRecord.html" title="class in models"><code>ExamRecord</code></a>, 
<a href="../utils/Authentication.html#authorize-java.lang.Integer-"><code>Authentication.authorize(Integer)</code></a>, 
<a href="../controllers/Application.html#enter--"><code>Application.enter()</code></a></dd>
</dl>
</li>
</ul>
<a name="pollMessage--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>pollMessage</h4>
<pre>public static&nbsp;Result&nbsp;pollMessage()</pre>
<div class="block">Gets from database all unread messages of an <a href="../models/ExamRecord.html" title="class in models"><code>exam record</code></a>.

 Information expected from the form received:
 <ul>
     <li>examId: id of the exam records whose chats are to be fetched</li>
     <li>lastChatId: id of the last chat that has been read by student, used to identify unread messages</li>
 </ul></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A JsonNode wrapped in an ok HTTP response, it has 3 fields:
 <ul>
     <li>chatList: a list of unread chat messages in Json format</li>
     <li>lastChatId: he latest chat among the chatList</li>
     <li>error: similar semantics as enter() in Application</li>
 </ul></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../controllers/Application.html#enter--"><code>Application.enter()</code></a></dd>
</dl>
</li>
</ul>
<a name="sendMessage--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendMessage</h4>
<pre>public static&nbsp;Result&nbsp;sendMessage()</pre>
<div class="block">Puts into database a message sent by student.
 
 <p>Information expected from the form received:
 <ul>
     <li>examId: The <a href="../models/ExamRecord.html" title="class in models"><code>exam record</code></a> during which the message is sent.</li>
     <li>message: The content of the message</li>
 </ul></p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A JsonNode wrapped in a ok HTTP response carring an error field, whose semantic is similar to that of enter() in Application.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../models/Report.html" title="class in models"><code>Report</code></a>, 
<a href="../models/Chat.html" title="class in models"><code>Chat</code></a>, 
<a href="../controllers/Application.html#enter--"><code>Application.enter()</code></a></dd>
</dl>
</li>
</ul>
<a name="getPhoto-java.lang.Integer-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPhoto</h4>
<pre>public static&nbsp;Result&nbsp;getPhoto(java.lang.Integer&nbsp;studentId)</pre>
<div class="block">Gets from database the ID photo of a student.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>studentId</code> - ID of the student whose ID photo is being requested.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an HTTP ok response containing the byte representation of the student's ID photo</dd>
</dl>
</li>
</ul>
<a name="getImage-java.lang.Integer-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getImage</h4>
<pre>public static&nbsp;Result&nbsp;getImage(java.lang.Integer&nbsp;imageId)</pre>
<div class="block">Gets from database one of the frames making up the video stream of a student.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>imageId</code> - the id of the wanted frame.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an HTTP ok response containing the byte representation of the requested frame.</dd>
</dl>
</li>
</ul>
<a name="finishExam--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>finishExam</h4>
<pre>public static&nbsp;Result&nbsp;finishExam()</pre>
<div class="block">Finishes an exam for a student.

 <p>It is done by locking up the relevant <a href="../models/ExamRecord.html" title="class in models"><code>ExamRecord</code></a> and <a href="../models/Report.html" title="class in models"><code>Report</code></a>
 so no further changes could be made to theses 2 models as well as the 
 <a href="../models/Chat.html" title="class in models"><code>Chat</code></a> and <a href="../models/Image.html" title="class in models"><code>Image</code></a> models, both of which are considered to be
 pertaining 1 report(composition relationship).</p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A JsonNode wrapped in an ok HTTP response carring an error field to
 indicate whether the status of an exam is successfully modified, whose semantic
 is similar to that of enter() in Application.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../controllers/Application.html#enter--"><code>Application.enter()</code></a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../controllers/Application.html" title="class in controllers"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../controllers/InvigilatorController.html" title="class in controllers"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?controllers/ExamController.html" target="_top">Frames</a></li>
<li><a href="ExamController.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
